{
  "chat_template": "{%- set start_token = '<|:@:|start|:@:|>' -%}{%- set end_token = '<|:@::|end|:@::|>' -%}{%- set reasoning_start = '<|:@:|reasoning_start|:@:|>' -%}{%- set reasoning_end = '<|:@::|reasoning_end|:@::|>' -%}{%- set message_start = '<|:@:|message|:@:|>' -%}{%- set message_end = '<|:@::|message|:@::|>' -%}{%- set functions_start = '<|:@:|functions_start|:@:|>' -%}{%- set functions_end = '<|:@::|functions_end|:@::|>' -%}{%- set invoke_start = '<|:@:|invoke_start|:@:|>' -%}{%- set invoke_end = '<|:@::|invoke_end|:@::|>' -%}{%- set constrain_token = '<|:@:|constrain|:@:|>' -%}{%- set enable_reasoning = enable_reasoning | default(false) -%}{%- for message in messages -%}{%- if message.role == 'system' -%}{{ start_token }}system\n{{ message.content }}{{ end_token }}\n{% endif -%}{%- if message.role == 'developer' -%}{{ start_token }}developer\n{{ message.content }}{{ end_token }}\n{% endif -%}{%- if message.tools is defined -%}{{ start_token }}functions\n{{ message.tools | tojson(indent=2) }}{{ end_token }}\n{% endif -%}{%- if message.response_format is defined -%}{{ start_token }}response_format.json\n{{ message.response_format | tojson(indent=2) }}{{ end_token }}\n{% endif -%}{%- if message.role == 'user' -%}{{ start_token }}user\n{{ message.content }}{{ end_token }}\n{% endif -%}{%- if message.role == 'assistant' -%}{{ start_token }}assistant\n{%- if message.constrain is defined -%}{{ constrain_token }}{{ message.constrain }}{%- endif -%}{%- if enable_reasoning and message.reasoning is defined and message.reasoning -%}{{ reasoning_start }}\n{{ message.reasoning }}\n{{ reasoning_end }}{%- endif -%}{{ message_start }}{{ message.content }}{{ message_end }}{%- if message.tool_calls is defined and message.tool_calls -%}{{ functions_start }}{%- for tool_call in message.tool_calls -%}{{ invoke_start }}to=\"function.{{ tool_call.function.name }}\"{%- set args = tool_call.function.arguments -%}{%- if args is string -%}{%- set args = args | fromjson -%}{%- endif -%}{%- for key, value in args.items() -%}{%- if value is mapping or value is iterable and value is not string -%}<|parameter name=\"{{ key }}\"|>{{ value | tojson }}<||parameter||>{%- else -%}<|parameter name=\"{{ key }}\"|>{{ value }}<||parameter||>{%- endif -%}{%- endfor -%}{{ invoke_end }}{%- endfor -%}{{ functions_end }}{%- endif -%}{%- if message.constrain is defined -%}{{ constrain_token }}{%- endif -%}{{ end_token }}\n{% endif -%}{%- if message.role == 'tool' -%}{{ start_token }}tool\n{%- if message.name is defined -%}<||function_results_start to=function.{{ message.name }}||>{{ message.content }}<||function_response_end||>{%- elif message.tool_responses is defined -%}{%- for resp in message.tool_responses -%}<||function_results_start to=function.{{ resp.name }}||>{{ resp.content | tojson if resp.content is mapping else resp.content }}<||function_response_end||>\n{%- endfor -%}{%- else -%}{{ message.content }}{%- endif -%}<|:@::|function_results|:@::|>{{ end_token }}\n{% endif -%}{%- endfor -%}{%- if add_generation_prompt -%}{{ start_token }}assistant\n{%- if enable_reasoning -%}{{ reasoning_start }}\n{%- endif -%}{%- endif -%}",
  "chat_template_with_reasoning": "{%- set start_token = '<|:@:|start|:@:|>' -%}{%- set end_token = '<|:@::|end|:@::|>' -%}{%- set reasoning_start = '<|:@:|reasoning_start|:@:|>' -%}{%- set reasoning_end = '<|:@::|reasoning_end|:@::|>' -%}{%- set message_start = '<|:@:|message|:@:|>' -%}{%- set message_end = '<|:@::|message|:@::|>' -%}{%- set functions_start = '<|:@:|functions_start|:@:|>' -%}{%- set functions_end = '<|:@::|functions_end|:@::|>' -%}{%- set invoke_start = '<|:@:|invoke_start|:@:|>' -%}{%- set invoke_end = '<|:@::|invoke_end|:@::|>' -%}{%- set constrain_token = '<|:@:|constrain|:@:|>' -%}{%- for message in messages -%}{%- if message.role == 'system' -%}{{ start_token }}system\n{{ message.content }}{{ end_token }}\n{% endif -%}{%- if message.role == 'developer' -%}{{ start_token }}developer\n{{ message.content }}{{ end_token }}\n{% endif -%}{%- if message.tools is defined -%}{{ start_token }}functions\n{{ message.tools | tojson(indent=2) }}{{ end_token }}\n{% endif -%}{%- if message.response_format is defined -%}{{ start_token }}response_format.json\n{{ message.response_format | tojson(indent=2) }}{{ end_token }}\n{% endif -%}{%- if message.role == 'user' -%}{{ start_token }}user\n{{ message.content }}{{ end_token }}\n{% endif -%}{%- if message.role == 'assistant' -%}{{ start_token }}assistant\n{%- if message.constrain is defined -%}{{ constrain_token }}{{ message.constrain }}{%- endif -%}{%- if message.reasoning is defined and message.reasoning -%}{{ reasoning_start }}\n{{ message.reasoning }}\n{{ reasoning_end }}{%- endif -%}{{ message_start }}{{ message.content }}{{ message_end }}{%- if message.tool_calls is defined and message.tool_calls -%}{{ functions_start }}{%- for tool_call in message.tool_calls -%}{{ invoke_start }}to=\"function.{{ tool_call.function.name }}\"{%- set args = tool_call.function.arguments -%}{%- if args is string -%}{%- set args = args | fromjson -%}{%- endif -%}{%- for key, value in args.items() -%}{%- if value is mapping or value is iterable and value is not string -%}<|parameter name=\"{{ key }}\"|>{{ value | tojson }}<||parameter||>{%- else -%}<|parameter name=\"{{ key }}\"|>{{ value }}<||parameter||>{%- endif -%}{%- endfor -%}{{ invoke_end }}{%- endfor -%}{{ functions_end }}{%- endif -%}{%- if message.constrain is defined -%}{{ constrain_token }}{%- endif -%}{{ end_token }}\n{% endif -%}{%- if message.role == 'tool' -%}{{ start_token }}tool\n{%- if message.name is defined -%}<||function_results_start to=function.{{ message.name }}||>{{ message.content }}<||function_response_end||>{%- elif message.tool_responses is defined -%}{%- for resp in message.tool_responses -%}<||function_results_start to=function.{{ resp.name }}||>{{ resp.content | tojson if resp.content is mapping else resp.content }}<||function_response_end||>\n{%- endfor -%}{%- else -%}{{ message.content }}{%- endif -%}<|:@::|function_results|:@::|>{{ end_token }}\n{% endif -%}{%- endfor -%}{%- if add_generation_prompt -%}{{ start_token }}assistant\n{{ reasoning_start }}\n{%- endif -%}"
}
